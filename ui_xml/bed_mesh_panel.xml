<?xml version="1.0"?>
<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of HelixScreen.

  HelixScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  HelixScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with HelixScreen. If not, see <https://www.gnu.org/licenses/>.
-->
<component>
  <!-- Bed Mesh Visualization Panel -->
  <!-- Full-screen backdrop with semi-transparent overlay -->
  <view extends="lv_obj" name="bed_mesh_panel_backdrop" width="100%" height="100%" style_bg_opa="180" style_border_width="0" style_pad_all="0" style_radius="0" align="center" clickable="true">
    <!-- Bed mesh panel content (docked right edge) -->
    <lv_obj name="bed_mesh_panel" width="#overlay_panel_width_large" height="100%" align="right_mid" style_pad_all="0" style_border_width="0" scrollable="false" flex_flow="column">
      <!-- Header Bar -->
      <header_bar name="bed_mesh_header" title="Bed Mesh"/>
      <!-- Content Area -->
      <lv_obj name="bed_mesh_content" flex_grow="1" width="100%" style_bg_opa="0" style_pad_all="20" scrollable="false" style_border_width="0" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="center" style_pad_gap="20">
        <!-- Canvas (3D bed mesh visualization) -->
        <lv_obj width="100%" height="400" style_bg_opa="0" style_pad_all="0" style_border_width="0">
          <bed_mesh name="bed_mesh_canvas" width="600" height="400" align="center"/>
        </lv_obj>
        <!-- Info labels (reactively bound to subjects) -->
        <lv_obj width="100%" height="LV_SIZE_CONTENT" flex_flow="column" style_bg_opa="0" style_pad_all="0" style_border_width="0" style_pad_gap="4">
          <lv_label name="mesh_dimensions_label" bind_text="bed_mesh_dimensions" style_text_font="lv_font_montserrat_16" style_text_align="center"/>
          <lv_label name="mesh_z_range_label" bind_text="bed_mesh_z_range" style_text_font="lv_font_montserrat_14" style_text_align="center" style_text_color="#text_secondary"/>
        </lv_obj>
        <!-- Rotation controls -->
        <lv_obj width="100%" height="LV_SIZE_CONTENT" flex_flow="column" style_pad_all="12" style_pad_gap="8" style_bg_color="lv_xml_get_const('card_background')" style_radius="8" style_border_width="0">
          <!-- X rotation (tilt) -->
          <lv_obj width="100%" height="28" flex_flow="row" style_pad_all="0" style_pad_gap="12" style_border_width="0" style_bg_opa="0">
            <lv_label name="rotation_x_label" text="Tilt: -45&#xB0;" width="100" style_text_align="left"/>
            <lv_slider name="rotation_x_slider" flex_grow="1" height="28"/>
          </lv_obj>
          <!-- Z rotation (spin) -->
          <lv_obj width="100%" height="28" flex_flow="row" style_pad_all="0" style_pad_gap="12" style_border_width="0" style_bg_opa="0">
            <lv_label name="rotation_y_label" text="Spin: 45&#xB0;" width="100" style_text_align="left"/>
            <lv_slider name="rotation_z_slider" flex_grow="1" height="28"/>
          </lv_obj>
        </lv_obj>
      </lv_obj>
    </lv_obj>
  </view>
</component>
