diff --git a/src/xml/lv_xml.c b/src/xml/lv_xml.c
index eb2d72d97..ae3e065e4 100644
--- a/src/xml/lv_xml.c
+++ b/src/xml/lv_xml.c
@@ -749,8 +749,9 @@ static void resolve_params(lv_xml_component_scope_t * item_scope, lv_xml_compone
             const char * ext_value = lv_xml_get_value_of(parent_attrs, name_clean);
             if(ext_value) {
                 /*If the value is not resolved earlier (e.g. it's a top level element created manually)
-                 * use the default value*/
-                if(ext_value[0] == '#' || ext_value[0] == '$') {
+                 * use the default value. Note: Only check for '$' (unresolved props), not '#' which
+                 * indicates const/token references that will be resolved by resolve_consts later.*/
+                if(ext_value[0] == '$') {
                     ext_value = get_param_default(item_scope, name_clean);
                 }
                 else if(lv_streq(type, "style")) {
@@ -775,6 +776,26 @@ static void resolve_params(lv_xml_component_scope_t * item_scope, lv_xml_compone
     }
 }
 
+/**
+ * Check if a string is a valid hex color (exactly 6 hex digits).
+ * This allows values like "#1F1F1F" to pass through without being
+ * treated as const references after prop substitution.
+ */
+static bool is_hex_color(const char * str)
+{
+    if(str == NULL) return false;
+    size_t len = lv_strlen(str);
+    if(len != 6) return false;
+    for(size_t i = 0; i < 6; i++) {
+        char c = str[i];
+        bool is_hex = (c >= '0' && c <= '9') ||
+                      (c >= 'a' && c <= 'f') ||
+                      (c >= 'A' && c <= 'F');
+        if(!is_hex) return false;
+    }
+    return true;
+}
+
 static void resolve_consts(const char ** item_attrs, lv_xml_component_scope_t * scope)
 {
     uint32_t i;
@@ -785,6 +806,12 @@ static void resolve_consts(const char ** item_attrs, lv_xml_component_scope_t *
         if(value[0] == '#') {
             const char * value_clean = &value[1];
 
+            /*If the value is already a hex color (e.g. "#1F1F1F" from prop substitution),
+             *don't try to look it up as a const - pass it through unchanged*/
+            if(is_hex_color(value_clean)) {
+                continue;  /*Keep original value with #*/
+            }
+
             const char * const_value = lv_xml_get_const(scope, value_clean);
             if(const_value) {
                 item_attrs[i + 1] = const_value;
